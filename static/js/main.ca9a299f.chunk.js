(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{11:function(e,t,n){},12:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(6),i=n.n(c),s=(n(11),n(12),n(3)),l=function(){var e={ship:[{name:"carrier",length:5},{name:"battleship",length:4},{name:"destroyer",length:3},{name:"submarine",length:3},{name:"patrol boat",length:2}]},t={ship:[{name:"carrier",length:5},{name:"battleship",length:4},{name:"destroyer",length:3},{name:"submarine",length:3},{name:"patrol boat",length:2}]};return{shipLength:function(t){return e.ship.find((function(e){return e.name===t})).length},computerShips:function(){return t},isHit:function(e,t){for(var n=0;n<5;n++)t.ship[n].name===e&&t.ship[n].length--;return t},isSunk:function(e,t){for(var n=0;n<5;n++)if(t.ship[n].name===e)return 0===t.ship[n].length},shipDescriptions:function(){return e},changeAlignment:function(e){return"horizontal"===e?"vertical":"horizontal"}}},o=function(){var e=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},t=function(t,n){for(var a=0;a<n.length;a++)for(var r=n[a].ship[0].coordinates,c=0;c<r.length;c++)if(e(r[c],t))return n[a].ship[0].name},n=function(e,t){return t[e]},a=function(e,t,a,r){var c=n(e,a),i=r?"hit":"miss";return c.splice(t,1,i),c},r=function(e,t,n,a){return"horizontal"===a?function(e,t,n){for(var a=[],r=0;r<l().shipLength(e);r++)a=a.concat([[t,n+r]]);return a}(e,t,n):function(e,t,n){for(var a=[],r=0;r<l().shipLength(e);r++)a=a.concat([[t+r,n]]);return a}(e,t,n)};return{checkHitValidity:function(e,t,n){return"water"===n[e][t]||"ship"===n[e][t]},checkOverlappingShips:function(e,n,a,c,i){for(var s=r(e,n,a,c),l=0;l<s.length;l++)if(t(s[l],i))return!0;return!1},createBoard:function(){return Array(10).fill(0).map((function(e){return new Array(10).fill("water")}))},placeShip:r,receiveAttack:function(e,t,n){for(var a=0;a<e.length;a++)for(var r=e[a].ship[0].coordinates,c=0;c<r.length;c++)if(JSON.stringify(r[c])===JSON.stringify([t,n]))return!0;return!1},recordHit:a,changeBoard:function(e,t,n,r){return n.splice(t,1,a(t,e,n,r)),n},allShipsSunk:function(e){return console.log(e),e>=5},shipPlacement:function(e,t,n,a,c){var i={ship:[{name:e,coordinates:r(e,t,n,a)}]};return c=c.concat(i)},shipHit:function(e,n,a){return t([e,n],a)},checkValidity:function(e,t,n,a){for(var c,i,s=r(e,t,n,a),l=0;l<s.length;l++)if(!1===(c=s[l][0],i=s[l][1],!(c<0||c>9||i<0||i>9)))return!1;return!0},changeShipBoard:function(e,t,a){return a.splice(t,1,function(e,t,a){var r=n(e,a);return r.splice(t,1,"ship"),r}(t,e,a)),a}}},u=(n(5),n(2)),h=n.n(u),d=n(0),p=function(e){var t=e.playerText,n=e.computerText,a=e.changeAlignment,r=e.placeShips,c=e.shipsSunk,i=e.playerBoard,s=e.initiateAttack,l=e.computerSunk,o=e.computerBoard,u=e.placePlayerShips,p=e.resetGame,j=e.gameOver;return Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"dialogue",children:Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:t}),Object(d.jsx)("li",{children:n}),r?Object(d.jsx)("li",{children:Object(d.jsxs)("div",{className:"toggle",children:["horizontal",Object(d.jsxs)("label",{className:"switch",id:"toggle",children:[Object(d.jsx)("input",{type:"checkbox",id:"check",onClick:a}),Object(d.jsx)("span",{className:"slider round"})]}),"vertical"]})}):null]})}),Object(d.jsxs)("div",{children:[r?null:Object(d.jsxs)("div",{className:"player",children:[Object(d.jsx)("h2",{children:"Opponent"}),Object(d.jsxs)("h3",{children:["Sunk: ",c,"/5"]}),Object(d.jsx)("table",{children:i.slice(0,10).map((function(e,t){return Object(d.jsx)("tbody",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{className:e[0],value:"0"+t,onClick:j?null:s},h()()),Object(d.jsx)("td",{className:e[1],value:"1"+t,onClick:j?null:s},h()()),Object(d.jsx)("td",{className:e[2],value:"2"+t,onClick:j?null:s},h()()),Object(d.jsx)("td",{className:e[3],value:"3"+t,onClick:j?null:s},h()()),Object(d.jsx)("td",{className:e[4],value:"4"+t,onClick:j?null:s},h()()),Object(d.jsx)("td",{className:e[5],value:"5"+t,onClick:j?null:s},h()()),Object(d.jsx)("td",{className:e[6],value:"6"+t,onClick:j?null:s},h()()),Object(d.jsx)("td",{className:e[7],value:"7"+t,onClick:j?null:s},h()()),Object(d.jsx)("td",{className:e[8],value:"8"+t,onClick:j?null:s},h()()),Object(d.jsx)("td",{className:e[9],value:"9"+t,onClick:j?null:s},h()())]})},h()())}))})]}),Object(d.jsxs)("div",{className:"computer",children:[Object(d.jsx)("h2",{children:"Player"}),Object(d.jsxs)("h3",{children:["sunk: ",l,"/5"]}),Object(d.jsx)("table",{children:o.slice(0,10).map((function(e,t){return Object(d.jsx)("tbody",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{className:e[0],value:"0"+t,onClick:r?u:null},h()()),Object(d.jsx)("td",{className:e[1],value:"1"+t,onClick:r?u:null},h()()),Object(d.jsx)("td",{className:e[2],value:"2"+t,onClick:r?u:null},h()()),Object(d.jsx)("td",{className:e[3],value:"3"+t,onClick:r?u:null},h()()),Object(d.jsx)("td",{className:e[4],value:"4"+t,onClick:r?u:null},h()()),Object(d.jsx)("td",{className:e[5],value:"5"+t,onClick:r?u:null},h()()),Object(d.jsx)("td",{className:e[6],value:"6"+t,onClick:r?u:null},h()()),Object(d.jsx)("td",{className:e[7],value:"7"+t,onClick:r?u:null},h()()),Object(d.jsx)("td",{className:e[8],value:"8"+t,onClick:r?u:null},h()()),Object(d.jsx)("td",{className:e[9],value:"9"+t,onClick:r?u:null},h()())]})},h()())}))})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{className:"reset",onClick:p,children:"Start New Game"})})]})]})},j=function(){var e=function(e,t,n){return{userName:e,userBoard:t,userStatus:n}};return{selectTarget:function(e){return e[Math.floor(Math.random()*e.length)]},hitAgain:function(e,t){return[[e,t-1],[e,t+1],[e-1,t],[e+1,t]]},selectUser:function(t){return t%2===0?e("human","playerBoard","playerShipStatus"):e("computer","computerBoard","computerShipStatus")},randomCoordinate:function(){return Math.floor(10*Math.random())},randomAlignment:function(){return 0===Math.floor(2*Math.random())?"horizontal":"vertical"}}},b=void 0,f=function(){var e=Object(a.useState)(JSON.parse(localStorage.getItem("savedComputerBoard"))||[]),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(JSON.parse(localStorage.getItem("savedPlayerBoard"))||[]),i=Object(s.a)(c,2),u=i[0],h=i[1],f=Object(a.useState)([]),O=Object(s.a)(f,2),m=O[0],v=O[1],g=Object(a.useState)([]),S=Object(s.a)(g,2),k=S[0],x=S[1],N=Object(a.useState)([]),y=Object(s.a)(N,2),C=y[0],B=y[1],A=Object(a.useState)([]),I=Object(s.a)(A,2),J=I[0],P=I[1],H=Object(a.useState)(0),T=Object(s.a)(H,2),w=T[0],z=T[1],E=Object(a.useState)(""),M=Object(s.a)(E,2),D=M[0],V=M[1],L=Object(a.useState)(""),F=Object(s.a)(L,2),Y=F[0],G=F[1],q=Object(a.useState)(!0),U=Object(s.a)(q,2),K=U[0],Q=U[1],R=Object(a.useState)(0),W=Object(s.a)(R,2),X=W[0],Z=W[1],$=Object(a.useState)("horizontal"),_=Object(s.a)($,2),ee=_[0],te=_[1],ne=Object(a.useState)("0"),ae=Object(s.a)(ne,2),re=ae[0],ce=ae[1],ie=Object(a.useState)("0"),se=Object(s.a)(ie,2),le=se[0],oe=se[1],ue=Object(a.useState)(!1),he=Object(s.a)(ue,2),de=he[0],pe=he[1],je=Object(a.useState)([]),be=Object(s.a)(je,2),fe=be[0],Oe=be[1],me=Object(a.useState)(!1),ve=Object(s.a)(me,2),ge=ve[0],Se=ve[1],ke=o(),xe=l(),Ne=j(),ye=function(){h(ke.createBoard()),r(ke.createBoard()),v(xe.shipDescriptions()),x(xe.computerShips()),Ce(),V("Click square to place carrier on the board.")};Object(a.useEffect)((function(){ye()}),[]),Object(a.useEffect)((function(){localStorage.setItem("savedPlayerBoard",JSON.stringify(u))}),[u]),Object(a.useEffect)((function(){localStorage.setItem("savedComputerBoard",JSON.stringify(n))}),[n]),Object(a.useEffect)((function(){ke.allShipsSunk(re)&&(G(""),V("All ships have been sunk. You win!"),Se(!0))}),[re]),Object(a.useEffect)((function(){ke.allShipsSunk(le)&&(V(""),G("All ships have been sunk. Opponent wins!"),Se(!0))}),[le]);var Ce=function(){for(var e=[],t=["carrier","battleship","destroyer","submarine","patrol boat"],n=0;n<5;n++){var a=parseInt(Ne.randomCoordinate()),r=parseInt(Ne.randomCoordinate()),c=Ne.randomAlignment();if(!ke.checkOverlappingShips(t[n],a,r,c,e)&&ke.checkValidity(t[n],a,r,c)){var i=ke.shipPlacement(t[n],a,r,c,[]);e=e.concat(i)}else n--;B(e)}},Be=function(e,t){var n=JSON.parse(localStorage.getItem("savedComputerBoard"));if(ke.checkHitValidity(t,e,n)){if(r(ke.changeBoard(e,t,n)),ke.receiveAttack(J,t,e)){r(ke.changeBoard(e,t,n,!0));var a=ke.shipHit(t,e,J);G(function(e,t){var n=xe.isHit(e,t);return x(n),xe.isSunk(e,n)?(oe((function(e){return parseInt(e+1)})),"Your "+e+" is sunk!"):" Opponent's attack hit a ship!  "}(a,k)),Oe(Ne.hitAgain(t,e)),pe(!0)}else r(ke.changeBoard(e,t,n,!1)),G("Opponent's attack missed. ");!ge&&z((function(e){return e+1}))}else!ge&&z((function(e){return e+2}))};return Object(a.useEffect)((function(){if("computer"===j().selectUser(w).userName)if(de){var e=j().selectTarget(fe),t=e[0],n=e[1];Be(n,t),pe(!1)}else{var a=j().randomCoordinate(),r=j().randomCoordinate();Be(a,r)}}),[w]),Object(d.jsxs)("div",{className:"game-board",children:[Object(d.jsx)("h1",{children:"Battleship"}),Object(d.jsx)(p,{playerText:D,computerText:Y,changeAlignment:function(){te(xe.changeAlignment(ee))}.bind(b),placeShips:K,shipsSunk:re,playerBoard:u,initiateAttack:function(e){e.preventDefault();var t=e.target.getAttribute("value"),n=JSON.parse(localStorage.getItem("savedPlayerBoard")),a=parseInt(t.charAt(0)),r=parseInt(t.charAt(1));if(ke.checkHitValidity(r,a,n)){if(ke.receiveAttack(C,r,a)){var c=ke.shipHit(r,a,C);h(ke.changeBoard(a,r,n,!0));var i=function(e,t){var n=xe.isHit(e,t);return v(n),xe.isSunk(e,n)?(ce((function(e){return parseInt(e+1)})),"Opponent's "+e+" is sunk!"):" Your attack hit a ship!  "}(c,m);V(i)}else h(ke.changeBoard(a,r,n,!1)),V(" Your attack missed. ");z((function(e){return e+1}))}else V("Coordinate has already been hit. Try again.")}.bind(b),computerSunk:le,computerBoard:n,placePlayerShips:function(e){e.preventDefault();var t=e.target.getAttribute("value"),n=["carrier","battleship","destroyer","submarine","patrol boat"],a=parseInt(t.charAt(0)),c=parseInt(t.charAt(1));if(!ke.checkOverlappingShips(n[X],c,a,ee,J)&&ke.checkValidity(n[X],c,a,ee)){var i=ke.shipPlacement(n[X],c,a,ee,[]);!function(e){for(var t=e[0].ship[0].coordinates.length,n=JSON.parse(localStorage.getItem("savedComputerBoard")),a=0;a<t;a++){var c=e[0].ship[0].coordinates[a][0],i=e[0].ship[0].coordinates[a][1];r(ke.changeShipBoard(i,c,n))}}(i),P((function(e){return e.concat(i)})),X<4?(V("Click square to place "+n[X+1]+" on the board."),Z((function(e){return e+1}))):(V("The battle begins! Attack your opponents board."),Q(!1))}else V("Ships may not overlap and must be on the board. Place "+n[X+1]+" again.")}.bind(b),resetGame:function(e){e.preventDefault(),r([]),G(""),B([]),P([]),z(0),Q(!0),Z(0),te("horizontal"),ce("0"),oe("0"),Se(!1),ye()}.bind(b),gameOver:ge})]})};var O=function(){return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("header",{className:"App-header"}),Object(d.jsx)(f,{})]})},m=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,16)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(O,{})}),document.getElementById("root")),m()},5:function(e,t,n){}},[[15,1,2]]]);
//# sourceMappingURL=main.ca9a299f.chunk.js.map